{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\siddharth\\\\Documents\\\\GitHub\\\\WhisperNet\\\\frontend\\\\src\\\\components\\\\ChatManager.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\n\n// ChatManager component handles the UI for chat tabs, user list, and message history\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatManager = ({\n  username,\n  messages,\n  onSendMessage,\n  onlineUsers,\n  recipient,\n  setRecipient,\n  message,\n  setMessage,\n  recipientStatus,\n  checkRecipientStatus,\n  typing,\n  handleMessageChange,\n  handleRelayBounce,\n  formatMessageTime,\n  getTimestamp\n}) => {\n  _s();\n  // State for managing chat tabs and history\n  const [chatTabs, setChatTabs] = useState([]);\n  const [activeTab, setActiveTab] = useState(null);\n  const [chatHistory, setChatHistory] = useState({});\n  const [unreadCounts, setUnreadCounts] = useState({});\n  const messagesEndRef = useRef(null);\n\n  // Initialize chat history from localStorage on component mount\n  useEffect(() => {\n    if (username) {\n      const storedHistory = localStorage.getItem(`whispernetChatHistory_${username}`);\n      if (storedHistory) {\n        try {\n          const parsedHistory = JSON.parse(storedHistory);\n          setChatHistory(parsedHistory);\n\n          // Initialize chat tabs from history\n          const tabs = Object.keys(parsedHistory);\n          setChatTabs(tabs);\n\n          // Set active tab if recipient is already set\n          if (recipient && tabs.includes(recipient)) {\n            setActiveTab(recipient);\n          }\n        } catch (error) {\n          console.error('Error parsing chat history:', error);\n          // If there's an error, start with empty history\n          setChatHistory({});\n        }\n      }\n    }\n  }, [username, recipient]);\n\n  // Update chat history when new messages arrive\n  useEffect(() => {\n    if (username && messages.length > 0) {\n      const newHistory = {\n        ...chatHistory\n      };\n\n      // Group messages by sender/recipient\n      messages.forEach(msg => {\n        const chatPartner = msg.from === username ? msg.to || recipient : msg.from;\n        if (chatPartner) {\n          if (!newHistory[chatPartner]) {\n            newHistory[chatPartner] = [];\n          }\n\n          // Check if message already exists in history to avoid duplicates\n          const messageExists = newHistory[chatPartner].some(existingMsg => existingMsg.timestamp && msg.timestamp && new Date(existingMsg.timestamp).getTime() === new Date(msg.timestamp).getTime() && existingMsg.message === msg.message);\n          if (!messageExists) {\n            newHistory[chatPartner].push(msg);\n          }\n        }\n      });\n      setChatHistory(newHistory);\n\n      // Save to localStorage\n      localStorage.setItem(`whispernetChatHistory_${username}`, JSON.stringify(newHistory));\n\n      // Update chat tabs\n      const updatedTabs = Object.keys(newHistory);\n      setChatTabs(updatedTabs);\n\n      // Update unread counts\n      const newUnreadCounts = {\n        ...unreadCounts\n      };\n      messages.forEach(msg => {\n        if (msg.from !== username && msg.from !== activeTab) {\n          newUnreadCounts[msg.from] = (newUnreadCounts[msg.from] || 0) + 1;\n        }\n      });\n      setUnreadCounts(newUnreadCounts);\n    }\n  }, [messages, username, chatHistory, recipient, activeTab, unreadCounts]);\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, activeTab, chatHistory]);\n\n  // Handle tab click\n  const handleTabClick = tabName => {\n    setActiveTab(tabName);\n    setRecipient(tabName);\n    checkRecipientStatus();\n\n    // Clear unread count for this tab\n    if (unreadCounts[tabName]) {\n      const newUnreadCounts = {\n        ...unreadCounts\n      };\n      delete newUnreadCounts[tabName];\n      setUnreadCounts(newUnreadCounts);\n    }\n  };\n\n  // Handle new chat\n  const startNewChat = () => {\n    setActiveTab(null);\n    setRecipient('');\n  };\n\n  // Handle clear chat history\n  const clearChatHistory = (chatPartner = null) => {\n    if (chatPartner) {\n      // Clear specific chat\n      const newHistory = {\n        ...chatHistory\n      };\n      delete newHistory[chatPartner];\n      setChatHistory(newHistory);\n      localStorage.setItem(`whispernetChatHistory_${username}`, JSON.stringify(newHistory));\n\n      // Update tabs\n      setChatTabs(Object.keys(newHistory));\n\n      // If we cleared the active tab, reset it\n      if (activeTab === chatPartner) {\n        setActiveTab(null);\n        setRecipient('');\n      }\n    } else {\n      // Clear all chat history\n      setChatHistory({});\n      localStorage.removeItem(`whispernetChatHistory_${username}`);\n      setChatTabs([]);\n      setActiveTab(null);\n      setRecipient('');\n    }\n  };\n\n  // Get messages for active tab\n  const getActiveTabMessages = () => {\n    if (activeTab && chatHistory[activeTab]) {\n      return chatHistory[activeTab];\n    }\n    return [];\n  };\n\n  // Handle send message\n  const handleSend = e => {\n    e.preventDefault();\n    if (!recipient || !message.trim()) return;\n\n    // Call the parent send function\n    onSendMessage(e, false);\n\n    // Add the message to chat history\n    const newMessage = {\n      from: username,\n      to: recipient,\n      message: message,\n      timestamp: new Date()\n    };\n    const newHistory = {\n      ...chatHistory\n    };\n    if (!newHistory[recipient]) {\n      newHistory[recipient] = [];\n    }\n    newHistory[recipient].push(newMessage);\n    setChatHistory(newHistory);\n\n    // Save to localStorage\n    localStorage.setItem(`whispernetChatHistory_${username}`, JSON.stringify(newHistory));\n\n    // Update chat tabs\n    const updatedTabs = Object.keys(newHistory);\n    setChatTabs(updatedTabs);\n\n    // Set active tab to recipient\n    setActiveTab(recipient);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '250px',\n        borderRight: '1px solid #1e2d3d',\n        display: 'flex',\n        flexDirection: 'column',\n        background: '#0d1117'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: '100%',\n            padding: '8px',\n            background: '#5ccfe6',\n            color: '#171c28',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontWeight: 'bold',\n            fontFamily: '\"Fira Code\", monospace'\n          },\n          onClick: startNewChat,\n          children: \"+ New Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '1',\n          overflowY: 'auto',\n          borderBottom: '1px solid #1e2d3d',\n          padding: '0 8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#5ccfe6',\n            fontSize: '14px',\n            padding: '8px 4px',\n            margin: '0'\n          },\n          children: \"Recent Chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), chatTabs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#636b78',\n            fontSize: '12px',\n            padding: '8px 4px'\n          },\n          children: \"No recent chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this) : chatTabs.map(tab => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px 4px',\n            margin: '4px 0',\n            background: activeTab === tab ? 'rgba(92, 207, 230, 0.1)' : 'transparent',\n            borderLeft: activeTab === tab ? '2px solid #5ccfe6' : '2px solid transparent',\n            cursor: 'pointer',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            borderRadius: '2px'\n          },\n          onClick: () => handleTabClick(tab),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '8px',\n                height: '8px',\n                borderRadius: '50%',\n                background: onlineUsers.includes(tab) ? '#bae67e' : '#ff8f40',\n                marginRight: '8px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '14px',\n                fontWeight: activeTab === tab ? 'bold' : 'normal'\n              },\n              children: tab\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 17\n          }, this), unreadCounts[tab] && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              background: '#ff3333',\n              color: 'white',\n              borderRadius: '50%',\n              padding: '2px 6px',\n              fontSize: '10px',\n              minWidth: '10px',\n              textAlign: 'center'\n            },\n            children: unreadCounts[tab]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: 'none',\n              border: 'none',\n              color: '#636b78',\n              cursor: 'pointer',\n              fontSize: '14px',\n              padding: '2px',\n              marginLeft: '4px',\n              display: activeTab === tab ? 'block' : 'none'\n            },\n            onClick: e => {\n              e.stopPropagation();\n              if (window.confirm(`Clear chat history with ${tab}?`)) {\n                clearChatHistory(tab);\n              }\n            },\n            title: \"Clear chat history\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }, this)]\n        }, tab, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '1',\n          overflowY: 'auto',\n          padding: '0 8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#bae67e',\n            fontSize: '14px',\n            padding: '8px 4px',\n            margin: '0',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Online Users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              background: '#1c4b3c',\n              color: '#bae67e',\n              borderRadius: '4px',\n              padding: '2px 6px',\n              fontSize: '10px'\n            },\n            children: onlineUsers.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), onlineUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#636b78',\n            fontSize: '12px',\n            padding: '8px 4px'\n          },\n          children: \"No users online\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this) : onlineUsers.map(user => user !== username && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px 4px',\n            margin: '4px 0',\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n            borderRadius: '2px'\n          },\n          onClick: () => {\n            setRecipient(user);\n            setActiveTab(user);\n            checkRecipientStatus();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '8px',\n              height: '8px',\n              borderRadius: '50%',\n              background: '#bae67e',\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '14px'\n            },\n            children: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 19\n          }, this)]\n        }, user, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: '100%',\n            padding: '8px',\n            background: '#4b1c1c',\n            color: '#ff8f40',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontFamily: '\"Fira Code\", monospace',\n            fontSize: '12px'\n          },\n          onClick: () => {\n            if (window.confirm('Clear all chat history? This cannot be undone.')) {\n              clearChatHistory();\n            }\n          },\n          children: \"Clear All History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: '1',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n        padding: '0 24px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSend,\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          padding: '16px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              flex: 1,\n              padding: 10,\n              borderRadius: 4,\n              border: '1px solid #1e2d3d',\n              background: '#0d1117',\n              color: '#a2aabc',\n              fontSize: 14,\n              marginRight: 8,\n              fontFamily: '\"Fira Code\", monospace'\n            },\n            placeholder: \"Recipient username\",\n            value: recipient,\n            onChange: e => {\n              setRecipient(e.target.value);\n              setActiveTab(null);\n            },\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this), recipient && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              marginLeft: 8,\n              fontSize: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 8,\n                height: 8,\n                borderRadius: '50%',\n                background: recipientStatus.online ? '#bae67e' : recipientStatus.exists ? '#ff8f40' : '#ff3333',\n                marginRight: 6\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 12,\n                color: recipientStatus.online ? '#bae67e' : recipientStatus.exists ? '#ff8f40' : '#ff3333'\n              },\n              children: recipientStatus.online ? 'ONLINE' : 'OFFLINE'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              flex: 1,\n              padding: 10,\n              borderRadius: 4,\n              border: '1px solid #1e2d3d',\n              background: '#0d1117',\n              color: '#a2aabc',\n              fontSize: 14,\n              marginRight: 8,\n              fontFamily: '\"Fira Code\", monospace'\n            },\n            placeholder: \"Type a message\",\n            value: message,\n            onChange: handleMessageChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this), recipient ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                padding: '0 18px',\n                borderRadius: '4px 0 0 4px',\n                background: recipientStatus.online ? 'linear-gradient(90deg, #5ccfe6, #bae67e)' : '#636b78',\n                color: '#171c28',\n                fontWeight: 'bold',\n                fontSize: 14,\n                border: 'none',\n                cursor: recipientStatus.online ? 'pointer' : 'not-allowed',\n                fontFamily: '\"Fira Code\", monospace'\n              },\n              type: \"submit\",\n              disabled: !recipientStatus.online,\n              title: recipientStatus.online ? \"Send message directly\" : \"User is offline or not found\",\n              children: \"SEND\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                padding: '0 12px',\n                borderRadius: '0 4px 4px 0',\n                background: '#4b1c1c',\n                color: '#ff8f40',\n                fontWeight: 'bold',\n                fontSize: 14,\n                border: 'none',\n                cursor: 'pointer',\n                fontFamily: '\"Fira Code\", monospace',\n                display: 'flex',\n                alignItems: 'center'\n              },\n              onClick: handleRelayBounce,\n              title: \"Message will be stored on relay servers for up to 4 hours\",\n              children: [\"RELAY\", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: 10,\n                  marginLeft: 4,\n                  background: 'rgba(255, 143, 64, 0.2)',\n                  padding: '1px 3px',\n                  borderRadius: 2\n                },\n                children: \"4h\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              padding: '0 18px',\n              borderRadius: 4,\n              background: '#636b78',\n              color: '#171c28',\n              fontWeight: 'bold',\n              fontSize: 14,\n              border: 'none',\n              cursor: 'not-allowed',\n              fontFamily: '\"Fira Code\", monospace'\n            },\n            disabled: true,\n            children: \"SEND\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), typing && recipient && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          color: '#5ccfe6',\n          marginBottom: 8\n        },\n        children: [recipient, \" is typing...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#0d1117',\n          borderRadius: 4,\n          padding: 12,\n          flex: 1,\n          overflowY: 'auto',\n          marginBottom: 12,\n          border: '1px solid #1e2d3d',\n          fontFamily: 'monospace'\n        },\n        children: [!activeTab || getActiveTabMessages().length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#5ccfe6',\n            fontSize: 14\n          },\n          children: [getTimestamp(), \" Connection established. Awaiting transmission...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this) : getActiveTabMessages().map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 12,\n            padding: 8,\n            borderRadius: 4,\n            background: msg.from === username ? 'rgba(92, 207, 230, 0.1)' : 'rgba(186, 230, 126, 0.1)',\n            borderLeft: msg.from === username ? '2px solid #5ccfe6' : '2px solid #bae67e'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              marginBottom: 4,\n              fontSize: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: msg.from === username ? '#5ccfe6' : '#bae67e',\n                fontWeight: 'bold'\n              },\n              children: msg.from === username ? 'You' : msg.from\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#636b78'\n              },\n              children: formatMessageTime(msg.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              wordBreak: 'break-word'\n            },\n            children: msg.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 17\n          }, this), msg.encrypted && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 10,\n              color: '#5ccfe6',\n              marginTop: 4,\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                display: 'inline-block',\n                width: 8,\n                height: 8,\n                borderRadius: '50%',\n                background: msg.decryptionStatus === 'decrypted' ? '#bae67e' : '#ff8f40',\n                marginRight: 4\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 21\n            }, this), msg.decryptionStatus === 'decrypted' ? 'Encrypted' : 'Encryption Failed']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 19\n          }, this), msg.bounced && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 10,\n              color: '#ff8f40',\n              marginTop: 4,\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginRight: 4\n              },\n              children: \"\\u27F3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 21\n            }, this), \"Relayed Message\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 19\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatManager, \"WZNk0KtNrEsg7Tdofkh6RVK6pEQ=\");\n_c = ChatManager;\nexport default ChatManager;\nvar _c;\n$RefreshReg$(_c, \"ChatManager\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatManager","username","messages","onSendMessage","onlineUsers","recipient","setRecipient","message","setMessage","recipientStatus","checkRecipientStatus","typing","handleMessageChange","handleRelayBounce","formatMessageTime","getTimestamp","_s","chatTabs","setChatTabs","activeTab","setActiveTab","chatHistory","setChatHistory","unreadCounts","setUnreadCounts","messagesEndRef","storedHistory","localStorage","getItem","parsedHistory","JSON","parse","tabs","Object","keys","includes","error","console","length","newHistory","forEach","msg","chatPartner","from","to","messageExists","some","existingMsg","timestamp","Date","getTime","push","setItem","stringify","updatedTabs","newUnreadCounts","_messagesEndRef$curre","current","scrollIntoView","behavior","handleTabClick","tabName","startNewChat","clearChatHistory","removeItem","getActiveTabMessages","handleSend","e","preventDefault","trim","newMessage","style","display","height","children","width","borderRight","flexDirection","background","padding","color","border","borderRadius","cursor","fontWeight","fontFamily","onClick","fileName","_jsxFileName","lineNumber","columnNumber","flex","overflowY","borderBottom","fontSize","margin","map","tab","borderLeft","justifyContent","alignItems","marginRight","minWidth","textAlign","marginLeft","stopPropagation","window","confirm","title","user","overflow","onSubmit","marginBottom","placeholder","value","onChange","target","required","online","exists","type","disabled","i","wordBreak","encrypted","marginTop","decryptionStatus","bounced","ref","_c","$RefreshReg$"],"sources":["C:/Users/siddharth/Documents/GitHub/WhisperNet/frontend/src/components/ChatManager.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\n// ChatManager component handles the UI for chat tabs, user list, and message history\r\nconst ChatManager = ({ \r\n  username, \r\n  messages, \r\n  onSendMessage, \r\n  onlineUsers, \r\n  recipient, \r\n  setRecipient, \r\n  message, \r\n  setMessage, \r\n  recipientStatus, \r\n  checkRecipientStatus,\r\n  typing,\r\n  handleMessageChange,\r\n  handleRelayBounce,\r\n  formatMessageTime,\r\n  getTimestamp\r\n}) => {\r\n  // State for managing chat tabs and history\r\n  const [chatTabs, setChatTabs] = useState([]);\r\n  const [activeTab, setActiveTab] = useState(null);\r\n  const [chatHistory, setChatHistory] = useState({});\r\n  const [unreadCounts, setUnreadCounts] = useState({});\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Initialize chat history from localStorage on component mount\r\n  useEffect(() => {\r\n    if (username) {\r\n      const storedHistory = localStorage.getItem(`whispernetChatHistory_${username}`);\r\n      if (storedHistory) {\r\n        try {\r\n          const parsedHistory = JSON.parse(storedHistory);\r\n          setChatHistory(parsedHistory);\r\n          \r\n          // Initialize chat tabs from history\r\n          const tabs = Object.keys(parsedHistory);\r\n          setChatTabs(tabs);\r\n          \r\n          // Set active tab if recipient is already set\r\n          if (recipient && tabs.includes(recipient)) {\r\n            setActiveTab(recipient);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error parsing chat history:', error);\r\n          // If there's an error, start with empty history\r\n          setChatHistory({});\r\n        }\r\n      }\r\n    }\r\n  }, [username, recipient]);\r\n\r\n  // Update chat history when new messages arrive\r\n  useEffect(() => {\r\n    if (username && messages.length > 0) {\r\n      const newHistory = { ...chatHistory };\r\n      \r\n      // Group messages by sender/recipient\r\n      messages.forEach(msg => {\r\n        const chatPartner = msg.from === username ? msg.to || recipient : msg.from;\r\n        if (chatPartner) {\r\n          if (!newHistory[chatPartner]) {\r\n            newHistory[chatPartner] = [];\r\n          }\r\n          \r\n          // Check if message already exists in history to avoid duplicates\r\n          const messageExists = newHistory[chatPartner].some(\r\n            existingMsg => \r\n              existingMsg.timestamp && msg.timestamp && \r\n              new Date(existingMsg.timestamp).getTime() === new Date(msg.timestamp).getTime() && \r\n              existingMsg.message === msg.message\r\n          );\r\n          \r\n          if (!messageExists) {\r\n            newHistory[chatPartner].push(msg);\r\n          }\r\n        }\r\n      });\r\n      \r\n      setChatHistory(newHistory);\r\n      \r\n      // Save to localStorage\r\n      localStorage.setItem(`whispernetChatHistory_${username}`, JSON.stringify(newHistory));\r\n      \r\n      // Update chat tabs\r\n      const updatedTabs = Object.keys(newHistory);\r\n      setChatTabs(updatedTabs);\r\n      \r\n      // Update unread counts\r\n      const newUnreadCounts = { ...unreadCounts };\r\n      messages.forEach(msg => {\r\n        if (msg.from !== username && msg.from !== activeTab) {\r\n          newUnreadCounts[msg.from] = (newUnreadCounts[msg.from] || 0) + 1;\r\n        }\r\n      });\r\n      setUnreadCounts(newUnreadCounts);\r\n    }\r\n  }, [messages, username, chatHistory, recipient, activeTab, unreadCounts]);\r\n\r\n  // Scroll to bottom when messages change\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages, activeTab, chatHistory]);\r\n\r\n  // Handle tab click\r\n  const handleTabClick = (tabName) => {\r\n    setActiveTab(tabName);\r\n    setRecipient(tabName);\r\n    checkRecipientStatus();\r\n    \r\n    // Clear unread count for this tab\r\n    if (unreadCounts[tabName]) {\r\n      const newUnreadCounts = { ...unreadCounts };\r\n      delete newUnreadCounts[tabName];\r\n      setUnreadCounts(newUnreadCounts);\r\n    }\r\n  };\r\n\r\n  // Handle new chat\r\n  const startNewChat = () => {\r\n    setActiveTab(null);\r\n    setRecipient('');\r\n  };\r\n\r\n  // Handle clear chat history\r\n  const clearChatHistory = (chatPartner = null) => {\r\n    if (chatPartner) {\r\n      // Clear specific chat\r\n      const newHistory = { ...chatHistory };\r\n      delete newHistory[chatPartner];\r\n      setChatHistory(newHistory);\r\n      localStorage.setItem(`whispernetChatHistory_${username}`, JSON.stringify(newHistory));\r\n      \r\n      // Update tabs\r\n      setChatTabs(Object.keys(newHistory));\r\n      \r\n      // If we cleared the active tab, reset it\r\n      if (activeTab === chatPartner) {\r\n        setActiveTab(null);\r\n        setRecipient('');\r\n      }\r\n    } else {\r\n      // Clear all chat history\r\n      setChatHistory({});\r\n      localStorage.removeItem(`whispernetChatHistory_${username}`);\r\n      setChatTabs([]);\r\n      setActiveTab(null);\r\n      setRecipient('');\r\n    }\r\n  };\r\n\r\n  // Get messages for active tab\r\n  const getActiveTabMessages = () => {\r\n    if (activeTab && chatHistory[activeTab]) {\r\n      return chatHistory[activeTab];\r\n    }\r\n    return [];\r\n  };\r\n\r\n  // Handle send message\r\n  const handleSend = (e) => {\r\n    e.preventDefault();\r\n    if (!recipient || !message.trim()) return;\r\n    \r\n    // Call the parent send function\r\n    onSendMessage(e, false);\r\n    \r\n    // Add the message to chat history\r\n    const newMessage = {\r\n      from: username,\r\n      to: recipient,\r\n      message: message,\r\n      timestamp: new Date(),\r\n    };\r\n    \r\n    const newHistory = { ...chatHistory };\r\n    if (!newHistory[recipient]) {\r\n      newHistory[recipient] = [];\r\n    }\r\n    newHistory[recipient].push(newMessage);\r\n    setChatHistory(newHistory);\r\n    \r\n    // Save to localStorage\r\n    localStorage.setItem(`whispernetChatHistory_${username}`, JSON.stringify(newHistory));\r\n    \r\n    // Update chat tabs\r\n    const updatedTabs = Object.keys(newHistory);\r\n    setChatTabs(updatedTabs);\r\n    \r\n    // Set active tab to recipient\r\n    setActiveTab(recipient);\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex', height: '100%' }}>\r\n      {/* Left sidebar with user list and chat tabs */}\r\n      <div style={{ \r\n        width: '250px', \r\n        borderRight: '1px solid #1e2d3d', \r\n        display: 'flex', \r\n        flexDirection: 'column',\r\n        background: '#0d1117'\r\n      }}>\r\n        {/* New Chat button */}\r\n        <div style={{ padding: '12px' }}>\r\n          <button \r\n            style={{ \r\n              width: '100%', \r\n              padding: '8px', \r\n              background: '#5ccfe6', \r\n              color: '#171c28', \r\n              border: 'none', \r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontWeight: 'bold',\r\n              fontFamily: '\"Fira Code\", monospace'\r\n            }}\r\n            onClick={startNewChat}\r\n          >\r\n            + New Chat\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Chat tabs */}\r\n        <div style={{ \r\n          flex: '1', \r\n          overflowY: 'auto',\r\n          borderBottom: '1px solid #1e2d3d',\r\n          padding: '0 8px'\r\n        }}>\r\n          <h3 style={{ \r\n            color: '#5ccfe6', \r\n            fontSize: '14px', \r\n            padding: '8px 4px',\r\n            margin: '0'\r\n          }}>\r\n            Recent Chats\r\n          </h3>\r\n          \r\n          {chatTabs.length === 0 ? (\r\n            <div style={{ \r\n              color: '#636b78', \r\n              fontSize: '12px', \r\n              padding: '8px 4px' \r\n            }}>\r\n              No recent chats\r\n            </div>\r\n          ) : (\r\n            chatTabs.map(tab => (\r\n              <div \r\n                key={tab} \r\n                style={{ \r\n                  padding: '8px 4px', \r\n                  margin: '4px 0',\r\n                  background: activeTab === tab ? 'rgba(92, 207, 230, 0.1)' : 'transparent',\r\n                  borderLeft: activeTab === tab ? '2px solid #5ccfe6' : '2px solid transparent',\r\n                  cursor: 'pointer',\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  borderRadius: '2px'\r\n                }}\r\n                onClick={() => handleTabClick(tab)}\r\n              >\r\n                <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                  <div style={{ \r\n                    width: '8px', \r\n                    height: '8px', \r\n                    borderRadius: '50%', \r\n                    background: onlineUsers.includes(tab) ? '#bae67e' : '#ff8f40',\r\n                    marginRight: '8px' \r\n                  }}></div>\r\n                  <span style={{ \r\n                    fontSize: '14px',\r\n                    fontWeight: activeTab === tab ? 'bold' : 'normal'\r\n                  }}>\r\n                    {tab}\r\n                  </span>\r\n                </div>\r\n                \r\n                {/* Unread count badge */}\r\n                {unreadCounts[tab] && (\r\n                  <span style={{ \r\n                    background: '#ff3333', \r\n                    color: 'white', \r\n                    borderRadius: '50%', \r\n                    padding: '2px 6px', \r\n                    fontSize: '10px',\r\n                    minWidth: '10px',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    {unreadCounts[tab]}\r\n                  </span>\r\n                )}\r\n                \r\n                {/* Clear chat button */}\r\n                <button \r\n                  style={{ \r\n                    background: 'none', \r\n                    border: 'none', \r\n                    color: '#636b78', \r\n                    cursor: 'pointer',\r\n                    fontSize: '14px',\r\n                    padding: '2px',\r\n                    marginLeft: '4px',\r\n                    display: activeTab === tab ? 'block' : 'none'\r\n                  }}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    if (window.confirm(`Clear chat history with ${tab}?`)) {\r\n                      clearChatHistory(tab);\r\n                    }\r\n                  }}\r\n                  title=\"Clear chat history\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n        \r\n        {/* Online users */}\r\n        <div style={{ \r\n          flex: '1', \r\n          overflowY: 'auto',\r\n          padding: '0 8px'\r\n        }}>\r\n          <h3 style={{ \r\n            color: '#bae67e', \r\n            fontSize: '14px', \r\n            padding: '8px 4px',\r\n            margin: '0',\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center'\r\n          }}>\r\n            <span>Online Users</span>\r\n            <span style={{ \r\n              background: '#1c4b3c', \r\n              color: '#bae67e', \r\n              borderRadius: '4px', \r\n              padding: '2px 6px', \r\n              fontSize: '10px' \r\n            }}>\r\n              {onlineUsers.length}\r\n            </span>\r\n          </h3>\r\n          \r\n          {onlineUsers.length === 0 ? (\r\n            <div style={{ \r\n              color: '#636b78', \r\n              fontSize: '12px', \r\n              padding: '8px 4px' \r\n            }}>\r\n              No users online\r\n            </div>\r\n          ) : (\r\n            onlineUsers.map(user => (\r\n              user !== username && (\r\n                <div \r\n                  key={user} \r\n                  style={{ \r\n                    padding: '8px 4px', \r\n                    margin: '4px 0',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    borderRadius: '2px'\r\n                  }}\r\n                  onClick={() => {\r\n                    setRecipient(user);\r\n                    setActiveTab(user);\r\n                    checkRecipientStatus();\r\n                  }}\r\n                >\r\n                  <div style={{ \r\n                    width: '8px', \r\n                    height: '8px', \r\n                    borderRadius: '50%', \r\n                    background: '#bae67e',\r\n                    marginRight: '8px' \r\n                  }}></div>\r\n                  <span style={{ fontSize: '14px' }}>\r\n                    {user}\r\n                  </span>\r\n                </div>\r\n              )\r\n            ))\r\n          )}\r\n        </div>\r\n        \r\n        {/* Clear all history button */}\r\n        <div style={{ padding: '12px' }}>\r\n          <button \r\n            style={{ \r\n              width: '100%', \r\n              padding: '8px', \r\n              background: '#4b1c1c', \r\n              color: '#ff8f40', \r\n              border: 'none', \r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontFamily: '\"Fira Code\", monospace',\r\n              fontSize: '12px'\r\n            }}\r\n            onClick={() => {\r\n              if (window.confirm('Clear all chat history? This cannot be undone.')) {\r\n                clearChatHistory();\r\n              }\r\n            }}\r\n          >\r\n            Clear All History\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Main chat area */}\r\n      <div style={{ \r\n        flex: '1', \r\n        display: 'flex', \r\n        flexDirection: 'column',\r\n        overflow: 'hidden',\r\n        padding: '0 24px'\r\n      }}>\r\n        {/* Message input form */}\r\n        <form onSubmit={handleSend} style={{ \r\n          display: 'flex', \r\n          flexDirection: 'column', \r\n          padding: '16px 0'\r\n        }}>\r\n          <div style={{ display: 'flex', marginBottom: 8 }}>\r\n            <input\r\n              style={{ \r\n                flex: 1, \r\n                padding: 10, \r\n                borderRadius: 4, \r\n                border: '1px solid #1e2d3d', \r\n                background: '#0d1117',\r\n                color: '#a2aabc',\r\n                fontSize: 14,\r\n                marginRight: 8,\r\n                fontFamily: '\"Fira Code\", monospace'\r\n              }}\r\n              placeholder=\"Recipient username\"\r\n              value={recipient}\r\n              onChange={(e) => {\r\n                setRecipient(e.target.value);\r\n                setActiveTab(null);\r\n              }}\r\n              required\r\n            />\r\n            {recipient && (\r\n              <div style={{ \r\n                display: 'flex', \r\n                alignItems: 'center', \r\n                marginLeft: 8,\r\n                fontSize: 12\r\n              }}>\r\n                <div style={{ \r\n                  width: 8, \r\n                  height: 8, \r\n                  borderRadius: '50%', \r\n                  background: recipientStatus.online ? '#bae67e' : \r\n                             recipientStatus.exists ? '#ff8f40' : '#ff3333',\r\n                  marginRight: 6 \r\n                }}></div>\r\n                <span style={{\r\n                  fontSize: 12,\r\n                  color: recipientStatus.online ? '#bae67e' : \r\n                        recipientStatus.exists ? '#ff8f40' : '#ff3333'\r\n                }}>\r\n                  {recipientStatus.online ? 'ONLINE' : 'OFFLINE'}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div style={{ display: 'flex' }}>\r\n            <input\r\n              style={{ \r\n                flex: 1, \r\n                padding: 10, \r\n                borderRadius: 4, \r\n                border: '1px solid #1e2d3d', \r\n                background: '#0d1117',\r\n                color: '#a2aabc',\r\n                fontSize: 14,\r\n                marginRight: 8,\r\n                fontFamily: '\"Fira Code\", monospace'\r\n              }}\r\n              placeholder=\"Type a message\"\r\n              value={message}\r\n              onChange={handleMessageChange}\r\n              required\r\n            />\r\n            {recipient ? (\r\n              <div style={{ display: 'flex' }}>\r\n                {/* SEND button */}\r\n                <button \r\n                  style={{ \r\n                    padding: '0 18px', \r\n                    borderRadius: '4px 0 0 4px', \r\n                    background: recipientStatus.online ? \r\n                      'linear-gradient(90deg, #5ccfe6, #bae67e)' : \r\n                      '#636b78', \r\n                    color: '#171c28', \r\n                    fontWeight: 'bold', \r\n                    fontSize: 14, \r\n                    border: 'none',\r\n                    cursor: recipientStatus.online ? 'pointer' : 'not-allowed',\r\n                    fontFamily: '\"Fira Code\", monospace'\r\n                  }} \r\n                  type=\"submit\"\r\n                  disabled={!recipientStatus.online}\r\n                  title={recipientStatus.online ? \"Send message directly\" : \"User is offline or not found\"}\r\n                >\r\n                  SEND\r\n                </button>\r\n                \r\n                {/* RELAY button */}\r\n                <button \r\n                  style={{ \r\n                    padding: '0 12px', \r\n                    borderRadius: '0 4px 4px 0', \r\n                    background: '#4b1c1c', \r\n                    color: '#ff8f40', \r\n                    fontWeight: 'bold', \r\n                    fontSize: 14, \r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontFamily: '\"Fira Code\", monospace',\r\n                    display: 'flex',\r\n                    alignItems: 'center'\r\n                  }} \r\n                  onClick={handleRelayBounce}\r\n                  title=\"Message will be stored on relay servers for up to 4 hours\"\r\n                >\r\n                  RELAY\r\n                  <span style={{\r\n                    fontSize: 10,\r\n                    marginLeft: 4,\r\n                    background: 'rgba(255, 143, 64, 0.2)',\r\n                    padding: '1px 3px',\r\n                    borderRadius: 2\r\n                  }}>\r\n                    4h\r\n                  </span>\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <button \r\n                style={{ \r\n                  padding: '0 18px', \r\n                  borderRadius: 4, \r\n                  background: '#636b78', \r\n                  color: '#171c28', \r\n                  fontWeight: 'bold', \r\n                  fontSize: 14, \r\n                  border: 'none',\r\n                  cursor: 'not-allowed',\r\n                  fontFamily: '\"Fira Code\", monospace'\r\n                }} \r\n                disabled={true}\r\n              >\r\n                SEND\r\n              </button>\r\n            )}\r\n          </div>\r\n        </form>\r\n        \r\n        {typing && recipient && (\r\n          <div style={{ fontSize: 12, color: '#5ccfe6', marginBottom: 8 }}>\r\n            {recipient} is typing...\r\n          </div>\r\n        )}\r\n        \r\n        {/* Messages display */}\r\n        <div style={{ \r\n          background: '#0d1117', \r\n          borderRadius: 4, \r\n          padding: 12, \r\n          flex: 1,\r\n          overflowY: 'auto', \r\n          marginBottom: 12,\r\n          border: '1px solid #1e2d3d',\r\n          fontFamily: 'monospace'\r\n        }}>\r\n          {(!activeTab || getActiveTabMessages().length === 0) ? (\r\n            <div style={{ color: '#5ccfe6', fontSize: 14 }}>\r\n              {getTimestamp()} Connection established. Awaiting transmission...\r\n            </div>\r\n          ) : (\r\n            getActiveTabMessages().map((msg, i) => (\r\n              <div key={i} style={{ \r\n                marginBottom: 12, \r\n                padding: 8,\r\n                borderRadius: 4,\r\n                background: msg.from === username ? 'rgba(92, 207, 230, 0.1)' : 'rgba(186, 230, 126, 0.1)',\r\n                borderLeft: msg.from === username ? '2px solid #5ccfe6' : '2px solid #bae67e'\r\n              }}>\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'space-between', \r\n                  marginBottom: 4, \r\n                  fontSize: 12 \r\n                }}>\r\n                  <span style={{ \r\n                    color: msg.from === username ? '#5ccfe6' : '#bae67e',\r\n                    fontWeight: 'bold'\r\n                  }}>\r\n                    {msg.from === username ? 'You' : msg.from}\r\n                  </span>\r\n                  <span style={{ color: '#636b78' }}>\r\n                    {formatMessageTime(msg.timestamp)}\r\n                  </span>\r\n                </div>\r\n                <div style={{ wordBreak: 'break-word' }}>\r\n                  {msg.message}\r\n                </div>\r\n                {msg.encrypted && (\r\n                  <div style={{ \r\n                    fontSize: 10, \r\n                    color: '#5ccfe6', \r\n                    marginTop: 4,\r\n                    display: 'flex',\r\n                    alignItems: 'center'\r\n                  }}>\r\n                    <span style={{ \r\n                      display: 'inline-block',\r\n                      width: 8,\r\n                      height: 8,\r\n                      borderRadius: '50%',\r\n                      background: msg.decryptionStatus === 'decrypted' ? '#bae67e' : '#ff8f40',\r\n                      marginRight: 4\r\n                    }}></span>\r\n                    {msg.decryptionStatus === 'decrypted' ? 'Encrypted' : 'Encryption Failed'}\r\n                  </div>\r\n                )}\r\n                {msg.bounced && (\r\n                  <div style={{ \r\n                    fontSize: 10, \r\n                    color: '#ff8f40', \r\n                    marginTop: 4,\r\n                    display: 'flex',\r\n                    alignItems: 'center'\r\n                  }}>\r\n                    <span style={{ marginRight: 4 }}>âŸ³</span>\r\n                    Relayed Message\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}