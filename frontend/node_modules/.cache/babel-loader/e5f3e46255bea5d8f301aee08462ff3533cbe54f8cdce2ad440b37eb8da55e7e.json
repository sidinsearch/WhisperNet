{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\siddharth\\\\Documents\\\\GitHub\\\\WhisperNet\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport FingerprintJS from '@fingerprintjs/fingerprintjs';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BASE_NODE_URL = process.env.REACT_APP_BASE_NODE_URL || \"http://localhost:5000\";\n\n// Initialize the fingerprint agent\nconst fpPromise = FingerprintJS.load();\nfunction App() {\n  _s();\n  const [username, setUsername] = useState('');\n  const [recipient, setRecipient] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [connected, setConnected] = useState(false);\n  const [status, setStatus] = useState('Checking relay status...');\n  const [deviceId, setDeviceId] = useState('');\n  const [connectionDetails, setConnectionDetails] = useState({});\n  const [showConnectionInfo, setShowConnectionInfo] = useState(false);\n  const [securityAlert, setSecurityAlert] = useState(null);\n  const [typing, setTyping] = useState(false);\n  const [relayServerUrl, setRelayServerUrl] = useState('Unknown');\n  const [availableRelays, setAvailableRelays] = useState([]);\n  const [activeRelay, setActiveRelay] = useState(null);\n  const [relayConnection, setRelayConnection] = useState(null);\n  const [relayStatus, setRelayStatus] = useState('checking');\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [recipientStatus, setRecipientStatus] = useState({\n    exists: false,\n    online: false\n  });\n  const [isCheckingUsername, setIsCheckingUsername] = useState(false);\n  const [usernameAvailable, setUsernameAvailable] = useState(true);\n  const socketRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n  const pingIntervalRef = useRef(null);\n\n  // Get device fingerprint on component mount\n  useEffect(() => {\n    const getDeviceId = async () => {\n      try {\n        const fp = await fpPromise;\n        const result = await fp.get();\n        setDeviceId(result.visitorId);\n      } catch (error) {\n        console.error('Failed to get device fingerprint:', error);\n        // Generate a fallback device ID\n        setDeviceId('fallback-' + Math.random().toString(36).substr(2, 9));\n      }\n    };\n    getDeviceId();\n  }, []);\n\n  // Check relay status on initial load\n  useEffect(() => {\n    if (deviceId) {\n      checkRelayStatus();\n    }\n  }, [deviceId]);\n\n  // Function to check relay status\n  const checkRelayStatus = async () => {\n    setStatus('Checking base node status...');\n    setRelayStatus('checking');\n    try {\n      // First try HTTP health check\n      const response = await axios.get(`${BASE_NODE_URL}/health`, {\n        timeout: 5000\n      });\n      if (response.status === 200) {\n        setRelayStatus('online');\n        setStatus('Base node online. Please login.');\n        return;\n      }\n    } catch (error) {\n      console.log('HTTP health check failed, trying socket connection:', error.message);\n    }\n\n    // Fallback to socket connection test\n    const tempSocket = io(BASE_NODE_URL, {\n      transports: ['websocket', 'polling'],\n      reconnectionAttempts: 2,\n      reconnectionDelay: 1000,\n      timeout: 5000,\n      forceNew: true\n    });\n    const connectionTimeout = setTimeout(() => {\n      setRelayStatus('timeout');\n      setStatus('Connection timeout. Base node may be offline.');\n      tempSocket.disconnect();\n    }, 8000);\n    tempSocket.on('connect', () => {\n      clearTimeout(connectionTimeout);\n      setRelayStatus('online');\n      setStatus('Base node online. Please login.');\n      tempSocket.disconnect();\n    });\n    tempSocket.on('connect_error', err => {\n      clearTimeout(connectionTimeout);\n      console.error('Socket connection error:', err);\n      setRelayStatus('offline');\n      setStatus('Base node offline. Please try again later.');\n      tempSocket.disconnect();\n    });\n  };\n\n  // Main socket connection effect\n  useEffect(() => {\n    if (connected && username && deviceId) {\n      connectToBaseNode();\n    }\n    return () => {\n      if (socketRef.current) {\n        clearInterval(pingIntervalRef.current);\n        socketRef.current.disconnect();\n        socketRef.current = null;\n      }\n    };\n  }, [connected, username, deviceId]);\n  const connectToBaseNode = () => {\n    // Clear any previous connection\n    if (socketRef.current) {\n      socketRef.current.disconnect();\n    }\n    console.log('Connecting to base node:', BASE_NODE_URL);\n    setStatus('Connecting to base node...');\n    socketRef.current = io(BASE_NODE_URL, {\n      transports: ['websocket', 'polling'],\n      reconnectionAttempts: 5,\n      reconnectionDelay: 2000,\n      query: {\n        deviceId,\n        username\n      },\n      forceNew: true\n    });\n\n    // Connection event handlers\n    socketRef.current.on('connect', () => {\n      console.log('Connected to base node with socket ID:', socketRef.current.id);\n      setStatus('Connected to base node');\n      setConnectionDetails({\n        socketId: socketRef.current.id,\n        transport: socketRef.current.io.engine.transport.name,\n        baseNodeUrl: BASE_NODE_URL\n      });\n\n      // Register with base node\n      socketRef.current.emit('registerUser', {\n        username,\n        deviceId\n      }, response => {\n        console.log('Registration response:', response);\n        if (response && response.success) {\n          setStatus('Registered successfully');\n\n          // Get initial data\n          getOnlineUsers();\n\n          // Get available relay servers\n          getAvailableRelays();\n          startPingInterval();\n        } else {\n          const errorMsg = (response === null || response === void 0 ? void 0 : response.reason) || 'Registration failed';\n          setStatus(`Registration failed: ${errorMsg}`);\n          setSecurityAlert({\n            username: username,\n            message: `Registration failed: ${errorMsg}`\n          });\n        }\n      });\n    });\n    socketRef.current.on('connect_error', err => {\n      console.error('Base node connection error:', err);\n      setStatus(`Connection failed: ${err.message}`);\n      setRelayStatus('offline');\n    });\n    socketRef.current.on('disconnect', reason => {\n      console.log('Disconnected from base node:', reason);\n      setStatus(`Disconnected: ${reason}`);\n      setRelayStatus('offline');\n      clearInterval(pingIntervalRef.current);\n\n      // Don't auto-reconnect if user manually disconnected\n      if (reason !== 'io client disconnect') {\n        setTimeout(() => {\n          if (connected) {\n            connectToBaseNode();\n          }\n        }, 3000);\n      }\n    });\n\n    // Message handling\n    socketRef.current.on('message', data => {\n      console.log('Received message:', data);\n      const {\n        from,\n        message,\n        fromDeviceId,\n        timestamp\n      } = data;\n\n      // Security check for device ID changes\n      const previousMessages = messages.filter(msg => msg.from === from);\n      if (previousMessages.length > 0 && previousMessages[0].fromDeviceId && previousMessages[0].fromDeviceId !== fromDeviceId) {\n        setSecurityAlert({\n          username: from,\n          message: `Warning: ${from} appears to be messaging from a different device!`\n        });\n      }\n      setMessages(msgs => [...msgs, {\n        from,\n        message,\n        fromDeviceId,\n        timestamp: new Date(timestamp || new Date())\n      }]);\n    });\n\n    // Handle relay server list updates\n    socketRef.current.on('relayList', relays => {\n      console.log('Received relay list:', relays);\n      setAvailableRelays(relays);\n\n      // If we're not connected to a relay yet, connect to the best one\n      if (!activeRelay && relays.length > 0) {\n        connectToRelay(relays[0]);\n      }\n    });\n\n    // Handle relay status updates\n    socketRef.current.on('relayStatusUpdate', data => {\n      console.log('Relay status update:', data);\n      const {\n        relayId,\n        status\n      } = data;\n      setAvailableRelays(prev => {\n        const updated = prev.map(relay => {\n          if (relay.relayId === relayId) {\n            return {\n              ...relay,\n              status\n            };\n          }\n          return relay;\n        });\n\n        // If the relay we're connected to went offline, connect to another one\n        if (activeRelay && activeRelay.relayId === relayId && status === 'offline') {\n          const onlineRelays = updated.filter(r => r.status === 'online');\n          if (onlineRelays.length > 0) {\n            // Schedule a reconnect to avoid doing it during this state update\n            setTimeout(() => connectToRelay(onlineRelays[0]), 100);\n          }\n        }\n        return updated;\n      });\n    });\n\n    // User status updates\n    socketRef.current.on('userStatusUpdate', data => {\n      console.log('User status update:', data);\n      const {\n        username: user,\n        online\n      } = data;\n      if (user === recipient) {\n        setRecipientStatus(prev => ({\n          ...prev,\n          online\n        }));\n      }\n\n      // Update online users list\n      setOnlineUsers(prev => {\n        if (online && !prev.includes(user)) {\n          return [...prev, user];\n        } else if (!online && prev.includes(user)) {\n          return prev.filter(u => u !== user);\n        }\n        return prev;\n      });\n    });\n\n    // Typing indicators\n    socketRef.current.on('userTyping', data => {\n      const {\n        username: typingUser\n      } = data;\n      if (typingUser === recipient) {\n        setTyping(true);\n        clearTimeout(typingTimeoutRef.current);\n        typingTimeoutRef.current = setTimeout(() => setTyping(false), 3000);\n      }\n    });\n\n    // Error handling\n    socketRef.current.on('error', error => {\n      console.error('Socket error:', error);\n      setSecurityAlert({\n        username: 'System',\n        message: `Connection error: ${error.message || 'Unknown error'}`\n      });\n    });\n  };\n  const getOnlineUsers = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('getOnlineUsers', {}, users => {\n        console.log('Online users:', users);\n        if (Array.isArray(users)) {\n          setOnlineUsers(users);\n        }\n      });\n    }\n  };\n\n  // Get available relay servers from base node\n  const getAvailableRelays = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('getRelays', {}, relays => {\n        console.log('Available relays:', relays);\n        if (Array.isArray(relays)) {\n          setAvailableRelays(relays);\n\n          // Connect to the first available relay if we're not connected to any\n          const onlineRelays = relays.filter(relay => relay.status === 'online');\n          if (onlineRelays.length > 0 && !activeRelay) {\n            connectToRelay(onlineRelays[0]);\n          }\n        }\n      });\n    }\n  };\n\n  // Connect to a relay server\n  const connectToRelay = relay => {\n    // Disconnect from current relay if connected\n    if (relayConnection) {\n      relayConnection.disconnect();\n      setRelayConnection(null);\n    }\n    const relayUrl = `http://${relay.ip}:${relay.port}`;\n    console.log(`Connecting to relay server: ${relayUrl}`);\n    setStatus(`Connecting to relay: ${relay.relayId}...`);\n    setRelayServerUrl(relayUrl);\n    const socket = io(relayUrl, {\n      transports: ['websocket', 'polling'],\n      reconnectionAttempts: 5,\n      reconnectionDelay: 2000,\n      query: {\n        deviceId,\n        username\n      },\n      forceNew: true\n    });\n    socket.on('connect', () => {\n      console.log(`Connected to relay ${relay.relayId} with socket ID: ${socket.id}`);\n      setStatus(`Connected to relay: ${relay.relayId}`);\n\n      // Register with the relay\n      socket.emit('register', {\n        username,\n        deviceId\n      }, response => {\n        console.log('Relay registration response:', response);\n        if (response && response.success) {\n          setActiveRelay(relay);\n          setRelayConnection(socket);\n          setStatus(`Registered with relay: ${relay.relayId}`);\n\n          // Store relay info for future use\n          localStorage.setItem('lastRelay', JSON.stringify(relay));\n        } else {\n          const errorMsg = (response === null || response === void 0 ? void 0 : response.reason) || 'Registration with relay failed';\n          setStatus(`Relay registration failed: ${errorMsg}`);\n          socket.disconnect();\n        }\n      });\n    });\n    socket.on('connect_error', err => {\n      console.error(`Relay connection error: ${err.message}`);\n      setStatus(`Relay connection failed: ${err.message}`);\n\n      // Try another relay if available\n      const otherRelays = availableRelays.filter(r => r.relayId !== relay.relayId && r.status === 'online');\n      if (otherRelays.length > 0) {\n        setTimeout(() => connectToRelay(otherRelays[0]), 1000);\n      } else {\n        setStatus('No available relays. Using base node directly.');\n      }\n    });\n    socket.on('disconnect', reason => {\n      console.log(`Disconnected from relay: ${reason}`);\n      setStatus(`Disconnected from relay: ${reason}`);\n      setActiveRelay(null);\n\n      // Try to reconnect to another relay if available\n      const onlineRelays = availableRelays.filter(r => r.status === 'online');\n      if (onlineRelays.length > 0) {\n        setTimeout(() => connectToRelay(onlineRelays[0]), 2000);\n      }\n    });\n\n    // Message handling\n    socket.on('receiveMessage', data => {\n      console.log('Received message from relay:', data);\n      const {\n        from,\n        message,\n        fromDeviceId,\n        timestamp\n      } = data;\n\n      // Security check for device ID changes\n      const previousMessages = messages.filter(msg => msg.from === from);\n      if (previousMessages.length > 0 && previousMessages[0].fromDeviceId && previousMessages[0].fromDeviceId !== fromDeviceId) {\n        setSecurityAlert({\n          username: from,\n          message: `Warning: ${from} appears to be messaging from a different device!`\n        });\n      }\n      setMessages(msgs => [...msgs, {\n        from,\n        message,\n        fromDeviceId,\n        timestamp: new Date(timestamp || new Date())\n      }]);\n    });\n\n    // Typing indicators\n    socket.on('userTyping', data => {\n      const {\n        username: typingUser\n      } = data;\n      if (typingUser === recipient) {\n        setTyping(true);\n        clearTimeout(typingTimeoutRef.current);\n        typingTimeoutRef.current = setTimeout(() => setTyping(false), 3000);\n      }\n    });\n    return socket;\n  };\n  const startPingInterval = () => {\n    pingIntervalRef.current = setInterval(() => {\n      if (socketRef.current && socketRef.current.connected) {\n        socketRef.current.emit('ping', {}, response => {\n          if (response) {\n            console.log('Ping response:', response);\n          }\n        });\n      }\n    }, 30000);\n  };\n\n  // Check recipient status\n  const checkRecipientStatus = () => {\n    if (!recipient) {\n      setRecipientStatus({\n        exists: false,\n        online: false\n      });\n      return;\n    }\n\n    // Check through relay if connected, otherwise through base node\n    const socket = relayConnection || socketRef.current;\n    if (!socket) {\n      setRecipientStatus({\n        exists: false,\n        online: false\n      });\n      return;\n    }\n    const checkMethod = relayConnection ? 'checkRecipient' : 'checkUser';\n    socket.emit(checkMethod, {\n      username: recipient\n    }, response => {\n      console.log('Recipient check response:', response);\n      setRecipientStatus(response || {\n        exists: false,\n        online: false\n      });\n    });\n  };\n\n  // Effect to check recipient status whenever recipient changes\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (connected && recipient) {\n        checkRecipientStatus();\n      }\n    }, 500); // Debounce\n\n    return () => clearTimeout(timeoutId);\n  }, [connected, recipient]);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const handleUsernameSubmit = e => {\n    e.preventDefault();\n    if (username.trim() && relayStatus === 'online') {\n      setConnected(true);\n    } else if (relayStatus !== 'online') {\n      setSecurityAlert({\n        username: 'System',\n        message: 'Cannot connect: Base node is offline'\n      });\n    }\n  };\n  const handleRecipientChange = e => {\n    setRecipient(e.target.value.trim());\n  };\n  const handleSend = e => {\n    e.preventDefault();\n    if (!recipient || !message.trim()) return;\n    const messageData = {\n      to: recipient,\n      message: message.trim(),\n      deviceId,\n      timestamp: new Date().toISOString()\n    };\n    console.log('Sending message:', messageData);\n\n    // Send through relay if connected, otherwise through base node\n    const socket = relayConnection || socketRef.current;\n    if (!socket) {\n      setSecurityAlert({\n        username: 'System',\n        message: 'No active connection to send message'\n      });\n      return;\n    }\n\n    // Log connection details before sending\n    console.log(`Connection established. Sending through ${relayConnection ? 'relay' : 'base node'}...`);\n    socket.emit('sendMessage', messageData, response => {\n      console.log('Send message response:', response);\n      if (response && (response.success || response.delivered)) {\n        // Add message to local state\n        setMessages(msgs => [...msgs, {\n          from: username,\n          message: message.trim(),\n          fromDeviceId: deviceId,\n          timestamp: new Date()\n        }]);\n        setMessage('');\n      } else {\n        const errorMsg = (response === null || response === void 0 ? void 0 : response.reason) || 'Message delivery failed';\n        setSecurityAlert({\n          username: recipient,\n          message: `Failed to send message: ${errorMsg}`\n        });\n      }\n    });\n  };\n  const handleMessageChange = e => {\n    setMessage(e.target.value);\n\n    // Send typing indicator through relay if connected, otherwise through base node\n    const socket = relayConnection || socketRef.current;\n    if (socket && recipient && e.target.value.length > 0) {\n      socket.emit('typing', {\n        to: recipient\n      });\n    }\n  };\n  const handleDisconnect = () => {\n    setConnected(false);\n\n    // Disconnect from relay if connected\n    if (relayConnection) {\n      relayConnection.disconnect();\n      setRelayConnection(null);\n      setActiveRelay(null);\n    }\n\n    // Disconnect from base node\n    if (socketRef.current) {\n      socketRef.current.disconnect();\n    }\n    setMessages([]);\n    setOnlineUsers([]);\n    setRecipientStatus({\n      exists: false,\n      online: false\n    });\n    setStatus('Disconnected');\n\n    // Clear stored relay info\n    localStorage.removeItem('lastRelay');\n  };\n  const dismissAlert = () => {\n    setSecurityAlert(null);\n  };\n  const retryConnection = () => {\n    checkRelayStatus();\n  };\n\n  // Utility functions\n  const getTimestamp = () => {\n    const now = new Date();\n    return `[${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}]`;\n  };\n  const formatMessageTime = timestamp => {\n    if (!timestamp) return getTimestamp();\n    const date = new Date(timestamp);\n    return `[${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}]`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: '#0a0e14',\n      minHeight: '100vh',\n      color: '#a2aabc',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      fontFamily: '\"Fira Code\", monospace'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#171c28',\n        padding: 32,\n        borderRadius: 8,\n        minWidth: 400,\n        maxWidth: 600,\n        boxShadow: '0 4px 30px rgba(0, 255, 170, 0.15)',\n        border: '1px solid rgba(0, 255, 170, 0.3)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 24\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: 0,\n            color: '#5ccfe6',\n            fontFamily: '\"Fira Code\", monospace',\n            letterSpacing: '1px'\n          },\n          children: \"WhisperNet_\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            padding: '4px 8px',\n            borderRadius: 4,\n            background: relayStatus === 'online' ? '#1c4b3c' : '#4b1c1c',\n            color: relayStatus === 'online' ? '#5ccfe6' : '#ff8f40',\n            cursor: 'pointer'\n          },\n          onClick: () => setShowConnectionInfo(!showConnectionInfo)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 9\n      }, this), showConnectionInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#0d1117',\n          padding: 12,\n          borderRadius: 4,\n          fontSize: 12,\n          fontFamily: 'monospace',\n          marginBottom: 16,\n          border: '1px solid #1e2d3d'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Status: \", status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 13\n        }, this), connected && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Socket ID: \", connectionDetails.socketId || 'unknown']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Transport: \", connectionDetails.transport || 'unknown']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Base Node: \", connectionDetails.baseNodeUrl || BASE_NODE_URL]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Base Node Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: relayStatus === 'online' ? '#bae67e' : '#ff8f40'\n            },\n            children: relayStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 13\n        }, this), deviceId && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Device ID: \", deviceId.substring(0, 8), \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 26\n        }, this), connected && onlineUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 8\n          },\n          children: [\"Online Users: \", onlineUsers.join(', ')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 11\n      }, this), securityAlert && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#4b1c1c',\n          color: '#ff8f40',\n          padding: 12,\n          borderRadius: 4,\n          marginBottom: 16,\n          position: 'relative',\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginRight: 20\n          },\n          children: securityAlert.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            position: 'absolute',\n            top: 8,\n            right: 8,\n            background: 'none',\n            border: 'none',\n            color: '#ff8f40',\n            cursor: 'pointer',\n            fontSize: 16\n          },\n          onClick: dismissAlert,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 11\n      }, this), !connected ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 16,\n            fontSize: 14,\n            color: '#5ccfe6'\n          },\n          children: [getTimestamp(), \" Initializing secure connection...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUsernameSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              width: '100%',\n              padding: 10,\n              marginBottom: 12,\n              borderRadius: 4,\n              border: '1px solid #1e2d3d',\n              background: '#0d1117',\n              color: '#a2aabc',\n              fontSize: 16,\n              fontFamily: '\"Fira Code\", monospace',\n              boxSizing: 'border-box'\n            },\n            placeholder: \"Enter username\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              width: '100%',\n              padding: 10,\n              borderRadius: 4,\n              background: relayStatus === 'online' ? 'linear-gradient(90deg, #5ccfe6, #bae67e)' : '#636b78',\n              color: '#171c28',\n              fontWeight: 'bold',\n              fontSize: 16,\n              border: 'none',\n              cursor: relayStatus === 'online' ? 'pointer' : 'not-allowed',\n              fontFamily: '\"Fira Code\", monospace'\n            },\n            type: \"submit\",\n            disabled: relayStatus !== 'online',\n            children: relayStatus === 'online' ? 'AUTHENTICATE' : 'BASE NODE OFFLINE'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 13\n        }, this), relayStatus !== 'online' && /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: '100%',\n            padding: 8,\n            marginTop: 8,\n            borderRadius: 4,\n            background: '#4b1c1c',\n            color: '#ff8f40',\n            fontSize: 14,\n            border: 'none',\n            cursor: 'pointer',\n            fontFamily: '\"Fira Code\", monospace'\n          },\n          onClick: retryConnection,\n          children: \"RETRY CONNECTION\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12,\n            color: '#ff3333',\n            textAlign: 'center',\n            fontSize: 14\n          },\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSend,\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            marginBottom: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              style: {\n                flex: 1,\n                padding: 10,\n                borderRadius: 4,\n                border: '1px solid #1e2d3d',\n                background: '#0d1117',\n                color: '#a2aabc',\n                fontSize: 14,\n                marginRight: 8,\n                fontFamily: '\"Fira Code\", monospace'\n              },\n              placeholder: \"Recipient username\",\n              value: recipient,\n              onChange: handleRecipientChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 17\n            }, this), recipient && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                marginLeft: 8,\n                fontSize: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: 8,\n                  height: 8,\n                  borderRadius: '50%',\n                  background: recipientStatus.online ? '#bae67e' : recipientStatus.exists ? '#ff8f40' : '#ff3333',\n                  marginRight: 6\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 21\n              }, this), recipientStatus.exists ? recipientStatus.online ? 'ONLINE' : 'OFFLINE' : 'NOT FOUND']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 807,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 788,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              style: {\n                flex: 1,\n                padding: 10,\n                borderRadius: 4,\n                border: '1px solid #1e2d3d',\n                background: '#0d1117',\n                color: '#a2aabc',\n                fontSize: 14,\n                marginRight: 8,\n                fontFamily: '\"Fira Code\", monospace'\n              },\n              placeholder: \"Type a message\",\n              value: message,\n              onChange: handleMessageChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 828,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                padding: '0 18px',\n                borderRadius: 4,\n                background: recipientStatus.online ? 'linear-gradient(90deg, #5ccfe6, #bae67e)' : '#636b78',\n                color: '#171c28',\n                fontWeight: 'bold',\n                fontSize: 14,\n                border: 'none',\n                cursor: recipientStatus.online ? 'pointer' : 'not-allowed',\n                fontFamily: '\"Fira Code\", monospace'\n              },\n              type: \"submit\",\n              disabled: !recipientStatus.online,\n              children: \"SEND\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 845,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 827,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 13\n        }, this), typing && recipient && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            color: '#5ccfe6',\n            marginBottom: 8\n          },\n          children: [recipient, \" is typing...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#0d1117',\n            borderRadius: 4,\n            padding: 12,\n            minHeight: 200,\n            maxHeight: 350,\n            overflowY: 'auto',\n            marginBottom: 12,\n            border: '1px solid #1e2d3d',\n            fontFamily: 'monospace'\n          },\n          children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#5ccfe6',\n              fontSize: 14\n            },\n            children: [getTimestamp(), \" Connection established. Awaiting transmission...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 17\n          }, this) : messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 12,\n              padding: 8,\n              borderRadius: 4,\n              background: msg.from === username ? 'rgba(92, 207, 230, 0.1)' : 'rgba(186, 230, 126, 0.1)',\n              borderLeft: msg.from === username ? '2px solid #5ccfe6' : '2px solid #bae67e'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: 4,\n                fontSize: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: msg.from === username ? '#5ccfe6' : '#bae67e',\n                  fontWeight: 'bold'\n                },\n                children: msg.from === username ? 'YOU' : msg.from\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#636b78'\n                },\n                children: formatMessageTime(msg.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 897,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                wordBreak: 'break-word',\n                fontSize: 14\n              },\n              children: msg.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 21\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 19\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              padding: '8px 16px',\n              borderRadius: 4,\n              background: '#4b1c1c',\n              color: '#ff8f40',\n              fontSize: 14,\n              border: 'none',\n              cursor: 'pointer',\n              fontFamily: '\"Fira Code\", monospace'\n            },\n            onClick: handleDisconnect,\n            children: \"DISCONNECT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 919,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 12,\n              color: '#636b78',\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 8,\n                height: 8,\n                borderRadius: '50%',\n                background: status.includes('Connected') || status.includes('Registered') ? '#bae67e' : '#ff3333',\n                marginRight: 6\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 941,\n              columnNumber: 17\n            }, this), status.includes('Connected') || status.includes('Registered') ? 'SECURE CONNECTION' : 'CONNECTION LOST']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 935,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 628,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 619,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"fx8NmMiMt8vJnz6ZY0USUCwEpMc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","io","axios","FingerprintJS","jsxDEV","_jsxDEV","Fragment","_Fragment","BASE_NODE_URL","process","env","REACT_APP_BASE_NODE_URL","fpPromise","load","App","_s","username","setUsername","recipient","setRecipient","message","setMessage","messages","setMessages","connected","setConnected","status","setStatus","deviceId","setDeviceId","connectionDetails","setConnectionDetails","showConnectionInfo","setShowConnectionInfo","securityAlert","setSecurityAlert","typing","setTyping","relayServerUrl","setRelayServerUrl","availableRelays","setAvailableRelays","activeRelay","setActiveRelay","relayConnection","setRelayConnection","relayStatus","setRelayStatus","onlineUsers","setOnlineUsers","recipientStatus","setRecipientStatus","exists","online","isCheckingUsername","setIsCheckingUsername","usernameAvailable","setUsernameAvailable","socketRef","messagesEndRef","typingTimeoutRef","pingIntervalRef","getDeviceId","fp","result","get","visitorId","error","console","Math","random","toString","substr","checkRelayStatus","response","timeout","log","tempSocket","transports","reconnectionAttempts","reconnectionDelay","forceNew","connectionTimeout","setTimeout","disconnect","on","clearTimeout","err","connectToBaseNode","current","clearInterval","query","id","socketId","transport","engine","name","baseNodeUrl","emit","success","getOnlineUsers","getAvailableRelays","startPingInterval","errorMsg","reason","data","from","fromDeviceId","timestamp","previousMessages","filter","msg","length","msgs","Date","relays","connectToRelay","relayId","prev","updated","map","relay","onlineRelays","r","user","includes","u","typingUser","users","Array","isArray","relayUrl","ip","port","socket","localStorage","setItem","JSON","stringify","otherRelays","setInterval","checkRecipientStatus","checkMethod","timeoutId","_messagesEndRef$curre","scrollIntoView","behavior","handleUsernameSubmit","e","preventDefault","trim","handleRecipientChange","target","value","handleSend","messageData","to","toISOString","delivered","handleMessageChange","handleDisconnect","removeItem","dismissAlert","retryConnection","getTimestamp","now","getHours","padStart","getMinutes","getSeconds","formatMessageTime","date","style","background","minHeight","color","display","alignItems","justifyContent","fontFamily","children","padding","borderRadius","minWidth","maxWidth","boxShadow","border","marginBottom","margin","letterSpacing","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","cursor","onClick","substring","marginTop","join","position","marginRight","top","right","onSubmit","width","boxSizing","placeholder","onChange","required","fontWeight","type","disabled","textAlign","flexDirection","flex","marginLeft","height","maxHeight","overflowY","i","borderLeft","wordBreak","ref","_c","$RefreshReg$"],"sources":["C:/Users/siddharth/Documents/GitHub/WhisperNet/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport FingerprintJS from '@fingerprintjs/fingerprintjs';\n\nconst BASE_NODE_URL = process.env.REACT_APP_BASE_NODE_URL || \"http://localhost:5000\";\n\n// Initialize the fingerprint agent\nconst fpPromise = FingerprintJS.load();\n\nfunction App() {\n  const [username, setUsername] = useState('');\n  const [recipient, setRecipient] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [connected, setConnected] = useState(false);\n  const [status, setStatus] = useState('Checking relay status...');\n  const [deviceId, setDeviceId] = useState('');\n  const [connectionDetails, setConnectionDetails] = useState({});\n  const [showConnectionInfo, setShowConnectionInfo] = useState(false);\n  const [securityAlert, setSecurityAlert] = useState(null);\n  const [typing, setTyping] = useState(false);\n  const [relayServerUrl, setRelayServerUrl] = useState('Unknown');\n  const [availableRelays, setAvailableRelays] = useState([]);\n  const [activeRelay, setActiveRelay] = useState(null);\n  const [relayConnection, setRelayConnection] = useState(null);\n  const [relayStatus, setRelayStatus] = useState('checking');\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [recipientStatus, setRecipientStatus] = useState({ exists: false, online: false });\n  const [isCheckingUsername, setIsCheckingUsername] = useState(false);\n  const [usernameAvailable, setUsernameAvailable] = useState(true);\n  const socketRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n  const pingIntervalRef = useRef(null);\n\n  // Get device fingerprint on component mount\n  useEffect(() => {\n    const getDeviceId = async () => {\n      try {\n        const fp = await fpPromise;\n        const result = await fp.get();\n        setDeviceId(result.visitorId);\n      } catch (error) {\n        console.error('Failed to get device fingerprint:', error);\n        // Generate a fallback device ID\n        setDeviceId('fallback-' + Math.random().toString(36).substr(2, 9));\n      }\n    };\n    getDeviceId();\n  }, []);\n\n  // Check relay status on initial load\n  useEffect(() => {\n    if (deviceId) {\n      checkRelayStatus();\n    }\n  }, [deviceId]);\n\n  // Function to check relay status\n  const checkRelayStatus = async () => {\n    setStatus('Checking base node status...');\n    setRelayStatus('checking');\n    \n    try {\n      // First try HTTP health check\n      const response = await axios.get(`${BASE_NODE_URL}/health`, { \n        timeout: 5000 \n      });\n      \n      if (response.status === 200) {\n        setRelayStatus('online');\n        setStatus('Base node online. Please login.');\n        return;\n      }\n    } catch (error) {\n      console.log('HTTP health check failed, trying socket connection:', error.message);\n    }\n    \n    // Fallback to socket connection test\n    const tempSocket = io(BASE_NODE_URL, {\n      transports: ['websocket', 'polling'],\n      reconnectionAttempts: 2,\n      reconnectionDelay: 1000,\n      timeout: 5000,\n      forceNew: true\n    });\n    \n    const connectionTimeout = setTimeout(() => {\n      setRelayStatus('timeout');\n      setStatus('Connection timeout. Base node may be offline.');\n      tempSocket.disconnect();\n    }, 8000);\n    \n    tempSocket.on('connect', () => {\n      clearTimeout(connectionTimeout);\n      setRelayStatus('online');\n      setStatus('Base node online. Please login.');\n      tempSocket.disconnect();\n    });\n    \n    tempSocket.on('connect_error', (err) => {\n      clearTimeout(connectionTimeout);\n      console.error('Socket connection error:', err);\n      setRelayStatus('offline');\n      setStatus('Base node offline. Please try again later.');\n      tempSocket.disconnect();\n    });\n  };\n\n  // Main socket connection effect\n  useEffect(() => {\n    if (connected && username && deviceId) {\n      connectToBaseNode();\n    }\n    \n    return () => {\n      if (socketRef.current) {\n        clearInterval(pingIntervalRef.current);\n        socketRef.current.disconnect();\n        socketRef.current = null;\n      }\n    };\n  }, [connected, username, deviceId]);\n\n  const connectToBaseNode = () => {\n    // Clear any previous connection\n    if (socketRef.current) {\n      socketRef.current.disconnect();\n    }\n    \n    console.log('Connecting to base node:', BASE_NODE_URL);\n    setStatus('Connecting to base node...');\n    \n    socketRef.current = io(BASE_NODE_URL, {\n      transports: ['websocket', 'polling'],\n      reconnectionAttempts: 5,\n      reconnectionDelay: 2000,\n      query: { \n        deviceId,\n        username \n      },\n      forceNew: true\n    });\n    \n    // Connection event handlers\n    socketRef.current.on('connect', () => {\n      console.log('Connected to base node with socket ID:', socketRef.current.id);\n      setStatus('Connected to base node');\n      setConnectionDetails({\n        socketId: socketRef.current.id,\n        transport: socketRef.current.io.engine.transport.name,\n        baseNodeUrl: BASE_NODE_URL\n      });\n      \n      // Register with base node\n      socketRef.current.emit('registerUser', { \n        username, \n        deviceId \n      }, (response) => {\n        console.log('Registration response:', response);\n        if (response && response.success) {\n          setStatus('Registered successfully');\n          \n          // Get initial data\n          getOnlineUsers();\n          \n          // Get available relay servers\n          getAvailableRelays();\n          \n          startPingInterval();\n          \n        } else {\n          const errorMsg = response?.reason || 'Registration failed';\n          setStatus(`Registration failed: ${errorMsg}`);\n          setSecurityAlert({\n            username: username,\n            message: `Registration failed: ${errorMsg}`\n          });\n        }\n      });\n    });\n    \n    socketRef.current.on('connect_error', (err) => {\n      console.error('Base node connection error:', err);\n      setStatus(`Connection failed: ${err.message}`);\n      setRelayStatus('offline');\n    });\n    \n    socketRef.current.on('disconnect', (reason) => {\n      console.log('Disconnected from base node:', reason);\n      setStatus(`Disconnected: ${reason}`);\n      setRelayStatus('offline');\n      clearInterval(pingIntervalRef.current);\n      \n      // Don't auto-reconnect if user manually disconnected\n      if (reason !== 'io client disconnect') {\n        setTimeout(() => {\n          if (connected) {\n            connectToBaseNode();\n          }\n        }, 3000);\n      }\n    });\n    \n    // Message handling\n    socketRef.current.on('message', (data) => {\n      console.log('Received message:', data);\n      const { from, message, fromDeviceId, timestamp } = data;\n      \n      // Security check for device ID changes\n      const previousMessages = messages.filter(msg => msg.from === from);\n      if (previousMessages.length > 0 && previousMessages[0].fromDeviceId && \n          previousMessages[0].fromDeviceId !== fromDeviceId) {\n        setSecurityAlert({\n          username: from,\n          message: `Warning: ${from} appears to be messaging from a different device!`\n        });\n      }\n      \n      setMessages(msgs => [...msgs, { \n        from, \n        message, \n        fromDeviceId, \n        timestamp: new Date(timestamp || new Date()) \n      }]);\n    });\n    \n    // Handle relay server list updates\n    socketRef.current.on('relayList', (relays) => {\n      console.log('Received relay list:', relays);\n      setAvailableRelays(relays);\n      \n      // If we're not connected to a relay yet, connect to the best one\n      if (!activeRelay && relays.length > 0) {\n        connectToRelay(relays[0]);\n      }\n    });\n    \n    // Handle relay status updates\n    socketRef.current.on('relayStatusUpdate', (data) => {\n      console.log('Relay status update:', data);\n      const { relayId, status } = data;\n      \n      setAvailableRelays(prev => {\n        const updated = prev.map(relay => {\n          if (relay.relayId === relayId) {\n            return { ...relay, status };\n          }\n          return relay;\n        });\n        \n        // If the relay we're connected to went offline, connect to another one\n        if (activeRelay && activeRelay.relayId === relayId && status === 'offline') {\n          const onlineRelays = updated.filter(r => r.status === 'online');\n          if (onlineRelays.length > 0) {\n            // Schedule a reconnect to avoid doing it during this state update\n            setTimeout(() => connectToRelay(onlineRelays[0]), 100);\n          }\n        }\n        \n        return updated;\n      });\n    });\n    \n    // User status updates\n    socketRef.current.on('userStatusUpdate', (data) => {\n      console.log('User status update:', data);\n      const { username: user, online } = data;\n      \n      if (user === recipient) {\n        setRecipientStatus(prev => ({ ...prev, online }));\n      }\n      \n      // Update online users list\n      setOnlineUsers(prev => {\n        if (online && !prev.includes(user)) {\n          return [...prev, user];\n        } else if (!online && prev.includes(user)) {\n          return prev.filter(u => u !== user);\n        }\n        return prev;\n      });\n    });\n    \n    // Typing indicators\n    socketRef.current.on('userTyping', (data) => {\n      const { username: typingUser } = data;\n      if (typingUser === recipient) {\n        setTyping(true);\n        clearTimeout(typingTimeoutRef.current);\n        typingTimeoutRef.current = setTimeout(() => setTyping(false), 3000);\n      }\n    });\n    \n    // Error handling\n    socketRef.current.on('error', (error) => {\n      console.error('Socket error:', error);\n      setSecurityAlert({\n        username: 'System',\n        message: `Connection error: ${error.message || 'Unknown error'}`\n      });\n    });\n  };\n\n  const getOnlineUsers = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('getOnlineUsers', {}, (users) => {\n        console.log('Online users:', users);\n        if (Array.isArray(users)) {\n          setOnlineUsers(users);\n        }\n      });\n    }\n  };\n  \n  // Get available relay servers from base node\n  const getAvailableRelays = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('getRelays', {}, (relays) => {\n        console.log('Available relays:', relays);\n        if (Array.isArray(relays)) {\n          setAvailableRelays(relays);\n          \n          // Connect to the first available relay if we're not connected to any\n          const onlineRelays = relays.filter(relay => relay.status === 'online');\n          if (onlineRelays.length > 0 && !activeRelay) {\n            connectToRelay(onlineRelays[0]);\n          }\n        }\n      });\n    }\n  };\n  \n  // Connect to a relay server\n  const connectToRelay = (relay) => {\n    // Disconnect from current relay if connected\n    if (relayConnection) {\n      relayConnection.disconnect();\n      setRelayConnection(null);\n    }\n    \n    const relayUrl = `http://${relay.ip}:${relay.port}`;\n    console.log(`Connecting to relay server: ${relayUrl}`);\n    setStatus(`Connecting to relay: ${relay.relayId}...`);\n    setRelayServerUrl(relayUrl);\n    \n    const socket = io(relayUrl, {\n      transports: ['websocket', 'polling'],\n      reconnectionAttempts: 5,\n      reconnectionDelay: 2000,\n      query: { \n        deviceId,\n        username \n      },\n      forceNew: true\n    });\n    \n    socket.on('connect', () => {\n      console.log(`Connected to relay ${relay.relayId} with socket ID: ${socket.id}`);\n      setStatus(`Connected to relay: ${relay.relayId}`);\n      \n      // Register with the relay\n      socket.emit('register', { \n        username, \n        deviceId \n      }, (response) => {\n        console.log('Relay registration response:', response);\n        if (response && response.success) {\n          setActiveRelay(relay);\n          setRelayConnection(socket);\n          setStatus(`Registered with relay: ${relay.relayId}`);\n          \n          // Store relay info for future use\n          localStorage.setItem('lastRelay', JSON.stringify(relay));\n        } else {\n          const errorMsg = response?.reason || 'Registration with relay failed';\n          setStatus(`Relay registration failed: ${errorMsg}`);\n          socket.disconnect();\n        }\n      });\n    });\n    \n    socket.on('connect_error', (err) => {\n      console.error(`Relay connection error: ${err.message}`);\n      setStatus(`Relay connection failed: ${err.message}`);\n      \n      // Try another relay if available\n      const otherRelays = availableRelays.filter(r => \n        r.relayId !== relay.relayId && r.status === 'online'\n      );\n      \n      if (otherRelays.length > 0) {\n        setTimeout(() => connectToRelay(otherRelays[0]), 1000);\n      } else {\n        setStatus('No available relays. Using base node directly.');\n      }\n    });\n    \n    socket.on('disconnect', (reason) => {\n      console.log(`Disconnected from relay: ${reason}`);\n      setStatus(`Disconnected from relay: ${reason}`);\n      setActiveRelay(null);\n      \n      // Try to reconnect to another relay if available\n      const onlineRelays = availableRelays.filter(r => r.status === 'online');\n      if (onlineRelays.length > 0) {\n        setTimeout(() => connectToRelay(onlineRelays[0]), 2000);\n      }\n    });\n    \n    // Message handling\n    socket.on('receiveMessage', (data) => {\n      console.log('Received message from relay:', data);\n      const { from, message, fromDeviceId, timestamp } = data;\n      \n      // Security check for device ID changes\n      const previousMessages = messages.filter(msg => msg.from === from);\n      if (previousMessages.length > 0 && previousMessages[0].fromDeviceId && \n          previousMessages[0].fromDeviceId !== fromDeviceId) {\n        setSecurityAlert({\n          username: from,\n          message: `Warning: ${from} appears to be messaging from a different device!`\n        });\n      }\n      \n      setMessages(msgs => [...msgs, { \n        from, \n        message, \n        fromDeviceId, \n        timestamp: new Date(timestamp || new Date()) \n      }]);\n    });\n    \n    // Typing indicators\n    socket.on('userTyping', (data) => {\n      const { username: typingUser } = data;\n      if (typingUser === recipient) {\n        setTyping(true);\n        clearTimeout(typingTimeoutRef.current);\n        typingTimeoutRef.current = setTimeout(() => setTyping(false), 3000);\n      }\n    });\n    \n    return socket;\n  };\n\n  const startPingInterval = () => {\n    pingIntervalRef.current = setInterval(() => {\n      if (socketRef.current && socketRef.current.connected) {\n        socketRef.current.emit('ping', {}, (response) => {\n          if (response) {\n            console.log('Ping response:', response);\n          }\n        });\n      }\n    }, 30000);\n  };\n\n  // Check recipient status\n  const checkRecipientStatus = () => {\n    if (!recipient) {\n      setRecipientStatus({ exists: false, online: false });\n      return;\n    }\n    \n    // Check through relay if connected, otherwise through base node\n    const socket = relayConnection || socketRef.current;\n    \n    if (!socket) {\n      setRecipientStatus({ exists: false, online: false });\n      return;\n    }\n    \n    const checkMethod = relayConnection ? 'checkRecipient' : 'checkUser';\n    \n    socket.emit(checkMethod, { username: recipient }, (response) => {\n      console.log('Recipient check response:', response);\n      setRecipientStatus(response || { exists: false, online: false });\n    });\n  };\n\n  // Effect to check recipient status whenever recipient changes\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (connected && recipient) {\n        checkRecipientStatus();\n      }\n    }, 500); // Debounce\n    \n    return () => clearTimeout(timeoutId);\n  }, [connected, recipient]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleUsernameSubmit = (e) => {\n    e.preventDefault();\n    if (username.trim() && relayStatus === 'online') {\n      setConnected(true);\n    } else if (relayStatus !== 'online') {\n      setSecurityAlert({\n        username: 'System',\n        message: 'Cannot connect: Base node is offline'\n      });\n    }\n  };\n\n  const handleRecipientChange = (e) => {\n    setRecipient(e.target.value.trim());\n  };\n\n  const handleSend = (e) => {\n    e.preventDefault();\n    if (!recipient || !message.trim()) return;\n    \n    const messageData = {\n      to: recipient,\n      message: message.trim(),\n      deviceId,\n      timestamp: new Date().toISOString()\n    };\n    \n    console.log('Sending message:', messageData);\n    \n    // Send through relay if connected, otherwise through base node\n    const socket = relayConnection || socketRef.current;\n    \n    if (!socket) {\n      setSecurityAlert({\n        username: 'System',\n        message: 'No active connection to send message'\n      });\n      return;\n    }\n    \n    // Log connection details before sending\n    console.log(`Connection established. Sending through ${relayConnection ? 'relay' : 'base node'}...`);\n    \n    socket.emit('sendMessage', messageData, (response) => {\n      console.log('Send message response:', response);\n      \n      if (response && (response.success || response.delivered)) {\n        // Add message to local state\n        setMessages(msgs => [...msgs, { \n          from: username, \n          message: message.trim(), \n          fromDeviceId: deviceId, \n          timestamp: new Date() \n        }]);\n        setMessage('');\n      } else {\n        const errorMsg = response?.reason || 'Message delivery failed';\n        setSecurityAlert({\n          username: recipient,\n          message: `Failed to send message: ${errorMsg}`\n        });\n      }\n    });\n  };\n\n  const handleMessageChange = (e) => {\n    setMessage(e.target.value);\n    \n    // Send typing indicator through relay if connected, otherwise through base node\n    const socket = relayConnection || socketRef.current;\n    \n    if (socket && recipient && e.target.value.length > 0) {\n      socket.emit('typing', { to: recipient });\n    }\n  };\n\n  const handleDisconnect = () => {\n    setConnected(false);\n    \n    // Disconnect from relay if connected\n    if (relayConnection) {\n      relayConnection.disconnect();\n      setRelayConnection(null);\n      setActiveRelay(null);\n    }\n    \n    // Disconnect from base node\n    if (socketRef.current) {\n      socketRef.current.disconnect();\n    }\n    \n    setMessages([]);\n    setOnlineUsers([]);\n    setRecipientStatus({ exists: false, online: false });\n    setStatus('Disconnected');\n    \n    // Clear stored relay info\n    localStorage.removeItem('lastRelay');\n  };\n\n  const dismissAlert = () => {\n    setSecurityAlert(null);\n  };\n\n  const retryConnection = () => {\n    checkRelayStatus();\n  };\n\n  // Utility functions\n  const getTimestamp = () => {\n    const now = new Date();\n    return `[${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}]`;\n  };\n\n  const formatMessageTime = (timestamp) => {\n    if (!timestamp) return getTimestamp();\n    const date = new Date(timestamp);\n    return `[${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}]`;\n  };\n\n  return (\n    <div style={{ \n      background: '#0a0e14', \n      minHeight: '100vh', \n      color: '#a2aabc', \n      display: 'flex', \n      alignItems: 'center', \n      justifyContent: 'center',\n      fontFamily: '\"Fira Code\", monospace'\n    }}>\n      <div style={{ \n        background: '#171c28', \n        padding: 32, \n        borderRadius: 8, \n        minWidth: 400,\n        maxWidth: 600,\n        boxShadow: '0 4px 30px rgba(0, 255, 170, 0.15)',\n        border: '1px solid rgba(0, 255, 170, 0.3)'\n      }}>\n        <div style={{ \n          display: 'flex', \n          justifyContent: 'space-between', \n          alignItems: 'center',\n          marginBottom: 24 \n        }}>\n          <h2 style={{ \n            margin: 0, \n            color: '#5ccfe6', \n            fontFamily: '\"Fira Code\", monospace',\n            letterSpacing: '1px'\n          }}>WhisperNet_</h2>\n          <div style={{ \n            fontSize: 12, \n            padding: '4px 8px', \n            borderRadius: 4, \n            background: relayStatus === 'online' ? '#1c4b3c' : '#4b1c1c',\n            color: relayStatus === 'online' ? '#5ccfe6' : '#ff8f40',\n            cursor: 'pointer'\n          }} onClick={() => setShowConnectionInfo(!showConnectionInfo)}>\n          </div>\n        </div>\n        \n        {showConnectionInfo && (\n          <div style={{ \n            background: '#0d1117', \n            padding: 12, \n            borderRadius: 4, \n            fontSize: 12, \n            fontFamily: 'monospace',\n            marginBottom: 16,\n            border: '1px solid #1e2d3d'\n          }}>\n            <div>Status: {status}</div>\n            {connected && (\n              <>\n                <div>Socket ID: {connectionDetails.socketId || 'unknown'}</div>\n                <div>Transport: {connectionDetails.transport || 'unknown'}</div>\n                <div>Base Node: {connectionDetails.baseNodeUrl || BASE_NODE_URL}</div>\n              </>\n            )}\n            <div>Base Node Status: <span style={{\n              color: relayStatus === 'online' ? '#bae67e' : '#ff8f40'\n            }}>{relayStatus}</span></div>\n            {deviceId && <div>Device ID: {deviceId.substring(0, 8)}...</div>}\n            {connected && onlineUsers.length > 0 && (\n              <div style={{ marginTop: 8 }}>Online Users: {onlineUsers.join(', ')}</div>\n            )}\n          </div>\n        )}\n        \n        {securityAlert && (\n          <div style={{ \n            background: '#4b1c1c', \n            color: '#ff8f40', \n            padding: 12, \n            borderRadius: 4, \n            marginBottom: 16,\n            position: 'relative',\n            fontSize: 14\n          }}>\n            <div style={{ marginRight: 20 }}>{securityAlert.message}</div>\n            <button \n              style={{ \n                position: 'absolute', \n                top: 8, \n                right: 8, \n                background: 'none', \n                border: 'none', \n                color: '#ff8f40', \n                cursor: 'pointer',\n                fontSize: 16\n              }}\n              onClick={dismissAlert}\n            >\n              \n            </button>\n          </div>\n        )}\n        \n        {!connected ? (\n          <div>\n            <div style={{ marginBottom: 16, fontSize: 14, color: '#5ccfe6' }}>\n              {getTimestamp()} Initializing secure connection...\n            </div>\n            <form onSubmit={handleUsernameSubmit}>\n              <input\n                style={{ \n                  width: '100%', \n                  padding: 10, \n                  marginBottom: 12, \n                  borderRadius: 4, \n                  border: '1px solid #1e2d3d', \n                  background: '#0d1117',\n                  color: '#a2aabc',\n                  fontSize: 16,\n                  fontFamily: '\"Fira Code\", monospace',\n                  boxSizing: 'border-box'\n                }}\n                placeholder=\"Enter username\"\n                value={username}\n                onChange={e => setUsername(e.target.value)}\n                required\n              />\n              <button \n                style={{ \n                  width: '100%', \n                  padding: 10, \n                  borderRadius: 4, \n                  background: relayStatus === 'online' ? \n                    'linear-gradient(90deg, #5ccfe6, #bae67e)' : \n                    '#636b78',\n                  color: '#171c28', \n                  fontWeight: 'bold', \n                  fontSize: 16, \n                  border: 'none',\n                  cursor: relayStatus === 'online' ? 'pointer' : 'not-allowed',\n                  fontFamily: '\"Fira Code\", monospace'\n                }} \n                type=\"submit\"\n                disabled={relayStatus !== 'online'}\n              >\n                {relayStatus === 'online' ? 'AUTHENTICATE' : 'BASE NODE OFFLINE'}\n              </button>\n            </form>\n            {relayStatus !== 'online' && (\n              <button \n                style={{ \n                  width: '100%', \n                  padding: 8, \n                  marginTop: 8,\n                  borderRadius: 4, \n                  background: '#4b1c1c', \n                  color: '#ff8f40', \n                  fontSize: 14, \n                  border: 'none',\n                  cursor: 'pointer',\n                  fontFamily: '\"Fira Code\", monospace'\n                }} \n                onClick={retryConnection}\n              >\n                RETRY CONNECTION\n              </button>\n            )}\n            <div style={{ marginTop: 12, color: '#ff3333', textAlign: 'center', fontSize: 14 }}>\n              {status}\n            </div>\n          </div>\n        ) : (\n          <>\n            <form onSubmit={handleSend} style={{ display: 'flex', flexDirection: 'column', marginBottom: 16 }}>\n              <div style={{ display: 'flex', marginBottom: 8 }}>\n                <input\n                  style={{ \n                    flex: 1, \n                    padding: 10, \n                    borderRadius: 4, \n                    border: '1px solid #1e2d3d', \n                    background: '#0d1117',\n                    color: '#a2aabc',\n                    fontSize: 14,\n                    marginRight: 8,\n                    fontFamily: '\"Fira Code\", monospace'\n                  }}\n                  placeholder=\"Recipient username\"\n                  value={recipient}\n                  onChange={handleRecipientChange}\n                  required\n                />\n                {recipient && (\n                  <div style={{ \n                    display: 'flex', \n                    alignItems: 'center', \n                    marginLeft: 8,\n                    fontSize: 12\n                  }}>\n                    <div style={{ \n                      width: 8, \n                      height: 8, \n                      borderRadius: '50%', \n                      background: recipientStatus.online ? '#bae67e' : \n                                 recipientStatus.exists ? '#ff8f40' : '#ff3333',\n                      marginRight: 6 \n                    }}></div>\n                    {recipientStatus.exists \n                      ? (recipientStatus.online ? 'ONLINE' : 'OFFLINE') \n                      : 'NOT FOUND'}\n                  </div>\n                )}\n              </div>\n              <div style={{ display: 'flex' }}>\n                <input\n                  style={{ \n                    flex: 1, \n                    padding: 10, \n                    borderRadius: 4, \n                    border: '1px solid #1e2d3d', \n                    background: '#0d1117',\n                    color: '#a2aabc',\n                    fontSize: 14,\n                    marginRight: 8,\n                    fontFamily: '\"Fira Code\", monospace'\n                  }}\n                  placeholder=\"Type a message\"\n                  value={message}\n                  onChange={handleMessageChange}\n                  required\n                />\n                <button \n                  style={{ \n                    padding: '0 18px', \n                    borderRadius: 4, \n                    background: recipientStatus.online ? \n                      'linear-gradient(90deg, #5ccfe6, #bae67e)' : \n                      '#636b78', \n                    color: '#171c28', \n                    fontWeight: 'bold', \n                    fontSize: 14, \n                    border: 'none',\n                    cursor: recipientStatus.online ? 'pointer' : 'not-allowed',\n                    fontFamily: '\"Fira Code\", monospace'\n                  }} \n                  type=\"submit\"\n                  disabled={!recipientStatus.online}\n                >\n                  SEND\n                </button>\n              </div>\n            </form>\n            \n            {typing && recipient && (\n              <div style={{ fontSize: 12, color: '#5ccfe6', marginBottom: 8 }}>\n                {recipient} is typing...\n              </div>\n            )}\n            \n            <div style={{ \n              background: '#0d1117', \n              borderRadius: 4, \n              padding: 12, \n              minHeight: 200, \n              maxHeight: 350, \n              overflowY: 'auto', \n              marginBottom: 12,\n              border: '1px solid #1e2d3d',\n              fontFamily: 'monospace'\n            }}>\n              {messages.length === 0 ? (\n                <div style={{ color: '#5ccfe6', fontSize: 14 }}>\n                  {getTimestamp()} Connection established. Awaiting transmission...\n                </div>\n              ) : (\n                messages.map((msg, i) => (\n                  <div key={i} style={{ \n                    marginBottom: 12, \n                    padding: 8,\n                    borderRadius: 4,\n                    background: msg.from === username ? 'rgba(92, 207, 230, 0.1)' : 'rgba(186, 230, 126, 0.1)',\n                    borderLeft: msg.from === username ? '2px solid #5ccfe6' : '2px solid #bae67e'\n                  }}>\n                    <div style={{ \n                      display: 'flex', \n                      justifyContent: 'space-between', \n                      marginBottom: 4, \n                      fontSize: 12 \n                    }}>\n                      <span style={{ \n                        color: msg.from === username ? '#5ccfe6' : '#bae67e',\n                        fontWeight: 'bold'\n                      }}>\n                        {msg.from === username ? 'YOU' : msg.from}\n                      </span>\n                      <span style={{ color: '#636b78' }}>{formatMessageTime(msg.timestamp)}</span>\n                    </div>\n                    <div style={{ wordBreak: 'break-word', fontSize: 14 }}>{msg.message}</div>\n                  </div>\n                ))\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n            \n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n              <button \n                style={{ \n                  padding: '8px 16px', \n                  borderRadius: 4, \n                  background: '#4b1c1c', \n                  color: '#ff8f40', \n                  fontSize: 14, \n                  border: 'none',\n                  cursor: 'pointer',\n                  fontFamily: '\"Fira Code\", monospace'\n                }} \n                onClick={handleDisconnect}\n              >\n                DISCONNECT\n              </button>\n              \n              <div style={{ \n                fontSize: 12, \n                color: '#636b78', \n                display: 'flex', \n                alignItems: 'center' \n              }}>\n                <div style={{ \n                  width: 8, \n                  height: 8, \n                  borderRadius: '50%', \n                  background: status.includes('Connected') || status.includes('Registered') ? '#bae67e' : '#ff3333',\n                  marginRight: 6 \n                }}></div>\n                {status.includes('Connected') || status.includes('Registered') ? 'SECURE CONNECTION' : 'CONNECTION LOST'}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}